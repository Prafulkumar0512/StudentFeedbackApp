{% extends "base.html" %}
{% block content %}

<div class="row dashboard-row">
    <div class="col">
        <div class=" card-col">
            <div class="container dashboard-card primary">
                <p>total feedbacks</p>
                <h1>{{ faculty_feedbacks_count }}</h1>
            </div>
        </div>
        <div class="card-col">
            <div class="container dashboard-card secondary">
                <p>overall sentiment</p>
                <h1>
                    {% if faculty_overall_sentiment > 0.5 %}
                    positive
                    {% elif faculty_overall_sentiment == 0 %} negative {% elif faculty_overall_sentiment>0 and
                    faculty_overall_sentiment < 0.5 %} neutral {% endif %} </h1>
            </div>
        </div>

    </div>
    <div class=" piechart-container  col"
        style="display: flex;background-color: #4d24ab;border-radius: 30px; flex-direction: column;justify-content: center; align-items: center;">
        <div id="piechart"></div>
    </div>
</div>


<!-- <div class="piechart-container" style="display: flex; flex-direction: column; align-items: center;">
        
    </div> -->


<div class="faculty-feedbacks-container">
    <h3>Feedbacks</h3>
    {% for feedback in faculty_feedbacks %}
    <div class="feedback">
        {% if feedback.sentiment < 0 %} <p class="sentiment" style="color: red; font-weight: bold;">negative</p>
            {% elif feedback.sentiment > 0 %}
            <p class="sentiment" style="color: green; font-weight: bold;">positive</p>
            {% elif feedback.sentiment == 0 %}
            <p class="sentiment" style="color: #F6BE00; font-weight: bold;">negative</p>
            {% endif %}
            <br>
            <p>{{feedback.punctuality}}.{{feedback.teaching_style}}.{{feedback.portion_completion}}.{{feedback.doubt_solving}}.{{feedback.teacher_preparedness}}.{{feedback.additional_comments}}.
            </p>
    </div>
    {% endfor %}
</div>

{% endblock %}

{% block jscode %}

<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

<script type="text/javascript">
    // Load google charts
    google.charts.load('current', { 'packages': ['corechart'] });
    google.charts.setOnLoadCallback(drawChart);

    // Draw the chart and set the chart values
    function drawChart() {
        var data = google.visualization.arrayToDataTable([
            ['Sentiment', 'Score'],
            ['Neutral', parseInt('{{neutral}}')],
            ['Positive', parseInt('{{pos}}')],
            ['Negative', parseInt('{{neg}}')],
        ]);

        // Optional; add a title and set the width and height of the chart
        var options = {
            title: 'Sentiment Analysis',
            width: 600,
            height: 400,
            backgroundColor: '#4d24ab',
            colors: ['#F6BE00', '#037d50', 'FF0000'],
            titleTextStyle: {
                color: '#ffffff',
                fontName: 'Nunito',
                fontSize: 20,

            },
            legendTextStyle: {
                color: '#ffffff',
                fontName: 'Nunito',
                fontSize: 16
            },

        };

        // Display the chart inside the <div> element with id="piechart"
        var chart = new google.visualization.PieChart(document.getElementById('piechart'));
        chart.draw(data, options);
    }
</script>

{% endblock jscode %}